(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[284],{1244:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/scan",function(){return t(2733)}])},5129:function(e,n,t){"use strict";t.d(n,{Z:function(){return m}});var a=t(5893),s=t(5440),c=t.n(s),r=t(7294),i=t(7649),o=t(4970),l=t.n(o),u=t(1346),d=t.n(u),_=t(468);function m(e){let{isSucess:n}=e,[t,s]=(0,r.useState)(!1),o=(0,r.useRef)(),u=(0,r.useRef)(),[m,f]=(0,r.useState)([]);(0,r.useEffect)(()=>{s(!0)},[]);let h=async()=>{if(null!==o.current){var e,n;let t=await (0,i._g)(null===(e=o.current)||void 0===e?void 0:e.video);await (0,i.oo)(null===(n=o.current)||void 0===n?void 0:n.video,u.current,t,"boxLandmarks"),f(t)}},w=e=>{var n;null===(n=e.current)||void 0===n||n.getContext("2d").clearRect(0,0,e.width,e.height)};return(0,r.useEffect)(()=>{null!==u.current&&console.log(u)},[]),(0,r.useEffect)(()=>{if(null===o||!0!=t)return w(u);{let e=setInterval(async()=>{await h()},80);return()=>{w(u),clearInterval(e)}}},[t]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"".concat(d().camera," ").concat(c().className),children:[(0,a.jsxs)("div",{className:d().camera__wrapper,children:[(0,a.jsx)(l(),{audio:!1,ref:o,width:"100%",height:"auto"}),(0,a.jsx)("canvas",{className:"".concat(d().webcamoverlay," ").concat(c().className),ref:u,style:{zIndex:99}})]}),(null==m?void 0:m.length)>0?m.map((e,t)=>{setTimeout(()=>{var t;n(Object.keys(t=e.expressions).reduce(function(e,n){return t[e]>t[n]?e:n}))},3e3)}):(0,a.jsx)(_.Z,{})]})})}},468:function(e,n,t){"use strict";t.d(n,{Z:function(){return r}});var a=t(5893),s=t(1599),c=t.n(s);function r(){return(0,a.jsx)("div",{className:c().container})}},7649:function(e,n,t){"use strict";t.d(n,{_g:function(){return c},e1:function(){return s},oo:function(){return r}});var a=t(9353);let s=()=>{let e="https://raw.githubusercontent.com/justadudewhohacks/face-api.js/master/weights/";return Promise.all([a.nets.tinyFaceDetector.loadFromUri(e+"tiny_face_detector_model-weights_manifest.json"),a.nets.faceLandmark68Net.loadFromUri(e+"face_landmark_68_model-weights_manifest.json"),a.nets.faceRecognitionNet.loadFromUri(e+"face_recognition_model-weights_manifest.json"),a.nets.faceExpressionNet.loadFromUri(e+"face_expression_model-weights_manifest.json")])},c=async e=>{if(!e)return;let n=null==e?void 0:e.getBoundingClientRect(),t={width:null==n?void 0:n.width,height:null==n?void 0:n.height};if(0===t.height)return;let s=await a.detectAllFaces(e,new a.TinyFaceDetectorOptions({inputSize:320})).withFaceLandmarks().withFaceExpressions();return a.resizeResults(s,t)},r=async(e,n,t,s)=>{if(e&&n&&t){var c,r,i,o,l;let u=e.getBoundingClientRect(),d={width:null==u?void 0:u.width,height:null==u?void 0:u.height};a.matchDimensions(n,d),null===(c=null==n?void 0:n.getContext("2d"))||void 0===c||c.clearRect(0,0,null==n?void 0:n.width,null==n?void 0:n.height);let _=null==a?void 0:a.resizeResults(t,d);switch(s){case"landmarks":a.draw.drawFaceLandmarks(n,_);break;case"expressions":a.draw.drawFaceExpressions(n,_);break;case"box":null==a||null===(r=a.draw)||void 0===r||r.drawDetections(n,_);break;case"boxLandmarks":null==a||null===(i=a.draw)||void 0===i||i.drawDetections(n,_),null==a||null===(o=a.draw)||void 0===o||o.drawFaceExpressions(n,_),null==a||null===(l=a.draw)||void 0===l||l.drawFaceLandmarks(n,_);break;case"error":console.log("error");default:throw Error("Invalid type")}}}},2733:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return h}});var a=t(5893),s=t(4443),c=t.n(s),r=t(9008),i=t.n(r),o=t(580),l=t.n(o),u=t(468),d=t(5129),_=t(7294),m=t(7649),f=t(1163);function h(){let e=(0,f.useRouter)(),[n,t]=(0,_.useState)(!0),[s,r]=(0,_.useState)(""),o=e=>{""!=e&&void 0!=e&&null!=e&&(r(e),console.log(s))};return(0,_.useEffect)(()=>{(0,m.e1)(),navigator.permissions.query({name:"camera"}).then(e=>{"granted"==e.state&&setTimeout(()=>{t(!1)},5e3)})},[]),(0,_.useEffect)(()=>{""!=s&&(sessionStorage.setItem("emotion",s),""!=s&&void 0!=s&&null!=s&&e.push("/explore"))},[s,e]),(0,a.jsxs)("div",{className:l().container,children:[(0,a.jsxs)(i(),{children:[(0,a.jsx)("title",{children:"BINGE"}),(0,a.jsx)("meta",{name:"description",content:"BINGE"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsx)("main",{className:l().main,children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.Z,{}),(0,a.jsx)("p",{className:"".concat(l().title," ").concat(c().className),children:"Make sure you allow camera access!"}),(0,a.jsx)("p",{className:"".concat(l().desc," ").concat(c().className),children:"After allowing camera access, Please wait for 5-10 seconds!"})]}):(0,a.jsxs)("div",{className:l().widget,children:[(0,a.jsx)("p",{className:"".concat(l().title," ").concat(c().className),children:"\uD83D\uDE01 Say cheese!"}),(0,a.jsx)("p",{className:"".concat(l().desc," ").concat(c().className),children:"Identifying your facial gestures, Hold it there!"}),(0,a.jsx)(d.Z,{isSucess:o})]})})]})}},4443:function(e){e.exports={style:{fontFamily:"'__Open_Sans_d8c39e', '__Open_Sans_Fallback_d8c39e'",fontStyle:"normal"},className:"__className_d8c39e"}},1346:function(e){e.exports={camera:"FaceTest_camera__0F1Q_",scroll_down:"FaceTest_scroll_down__MqKYe",camera__wrapper:"FaceTest_camera__wrapper__Jwd7u","camera__button-container":"FaceTest_camera__button-container__nTbWJ","camera__button--snap":"FaceTest_camera__button--snap__LL1ts",webcamoverlay:"FaceTest_webcamoverlay___HtQL",webcamoverlayhidden:"FaceTest_webcamoverlayhidden__Cr61h",results__container:"FaceTest_results__container__3IevW",results__wrapper:"FaceTest_results__wrapper__gyMK0"}},580:function(e){e.exports={container:"Scan_container__eCkJ5",main:"Scan_main__HF1V1",title:"Scan_title__Kbh5L",desc:"Scan_desc__xb0vM",widget:"Scan_widget___vdnf"}},1599:function(e){e.exports={container:"Spinner_container__hrwqx",spin:"Spinner_spin__tiwVl"}},4902:function(){},522:function(){},753:function(){}},function(e){e.O(0,[269,110,774,888,179],function(){return e(e.s=1244)}),_N_E=e.O()}]);